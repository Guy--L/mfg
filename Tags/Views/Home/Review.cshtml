@model ChannelView

@{
    ViewBag.Title = "Lines being Recorded";
    Layout = "~/Views/Shared/_Layout.cshtml";
}
<div class="container-fluid">
    <div class="row-fluid">
        <h2>Devices and Lines with Data</h2>
    </div>

    <div class="row-fluid">
        @Html.DisplayFor(m => m.nogrid)
    </div>

    <div class="row-fluid">
        <div class="col-md-offset-3 col-md-5">
            <table class="table table-condensed table-responsive">
                <thead><tr>
                    <th>Unit/Line</th>
                    <th width="40px">1</th>
                    <th width="40px">2</th>
                    <th width="40px">3</th>
                    <th width="40px">4</th>
                    <th width="40px">5</th>
                    <th width="40px">6</th>
                    <th width="40px">7</th>
                    <th width="40px">8</th>
                </tr></thead>
                <tbody>
                    @Html.DisplayFor(m=>m.grid, "ChannelGrid")
                </tbody>
            </table>
        </div>
    </div>

    <div class="row-fluid">
        <button class="btn btn-danger col-md-offset-5 col-md-1" id="next" disabled="disabled">
            Pick Tags <i class="fa fa-arrow-right"></i>
        </button>
    </div>
</div>

@section scripts {
    <script type="text/javascript">
        $(function () {
            $('button').on('click', function () {
                var $btn = $(this).is('button') ? $(this) : $(this).closest('button');
                if ($btn.hasClass('btn-danger')) {
                    var id = [];
                    $('.btn-warning').each(function () {
                        id.push($(this).data('id'));
                    });
                    location.href = '@Url.Action("TagsByLine","Home",null,Request.Url.Scheme)/' + JSON.stringify(id);
                    return;
                }
                if ($btn.hasClass('btn-warning')) {
                    $btn.removeClass('btn-warning').addClass('btn-primary');
                    $btn.children('i').removeClass('fa-check-square').addClass('fa-square');
                }
                else {
                    $btn.removeClass('btn-primary').addClass('btn-warning');
                    $btn.children('i').removeClass('fa-square').addClass('fa-check-square');
                }
                $('#next').attr('disabled', ($('.btn-warning').length === 0));
            });
        });
    </script>
}
