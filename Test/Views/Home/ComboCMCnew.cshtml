@model Test.Models.Display

@{
    ViewBag.Title = "Combo CMC Charts";
    Layout = "~/Views/Shared/_Fullscreen.cshtml";
}

@Model.Content

@section scripts{
    <script type="text/javascript">
        function requestFullScreen(element) {
            // Supports most browsers and their versions.
            var requestMethod = element.requestFullScreen || element.webkitRequestFullScreen || element.mozRequestFullScreen || element.msRequestFullScreen;

            if (requestMethod) { // Native full screen.
                requestMethod.call(element);
            } else if (typeof window.ActiveXObject !== "undefined") { // Older IE.
                var wscript = new ActiveXObject("WScript.Shell");
                if (wscript !== null) {
                    wscript.SendKeys("{F11}");
                }
            }
        }

        $(function () {
            var rhub = $.connection.refreshHub;
            rhub.client.refresh = function () {
                location.reload(true);
            };
            $.connection.hub.start().done(function () {
                rhub.server.register("Deck");
            });
            $.connection.hub.disconnected(function () {
                setTimeout(function () {
                    $.connection.hub.start();
                }, 1000); // Re-start connection after 1 second
            });

            var elem = document.body; // Make the body go full screen.
            requestFullScreen(elem);
        });
    </script>
}
